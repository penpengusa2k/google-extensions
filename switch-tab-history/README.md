# Switch Tab History

Switch Tab History は、直近のタブ履歴と現在開いているタブをコマンドパレット形式で高速に検索・切り替えできる Chrome 拡張機能です。履歴の自動収集、ピン固定、キーボードショートカットを組み合わせて、マウス操作に頼らずタブを管理できます。

## 主な使い方
- `Alt+K` でコマンドパレットを開く（拡張アイコンのクリックでも可）。
- `↑` / `↓` で候補を移動、`Enter` で開く。
- `/t` で始まるクエリは現在開いている全タブを検索対象に切り替えます。
- `Ctrl+Shift`（macOS は `Cmd+Shift`）で選択中のエントリをピン固定/解除。
- `Alt+Shift` で選択中のエントリを履歴・ピンから削除。
- `Escape` でコマンドパレットを閉じます。

## 履歴と設定
- 一定時間（既定値 3 秒）以上アクティブだったタブを自動で履歴に追加します。設定画面で 1〜10 秒の範囲で調整可能です。
- 履歴として保持する最大件数は 1〜30 件で指定できます。
- ピン固定済みのタブは自動履歴登録の対象外になり、常に一覧の先頭に表示されます。
- 「履歴除外 URL」でワイルドカード（`*`）を使ったパターンを 1 行ずつ指定すると、マッチしたページは履歴に追加されません。
- 設定画面では履歴の全削除も行えます。

## フォルダ構成
- `manifest.json` — MV3 マニフェスト。権限やショートカット、エントリポイントを定義。
- `service_worker.js` — 履歴管理・メッセージハンドリングを担うバックグラウンドロジック。
- `cs/content_script.js` — 各タブに注入され、コマンドパレット UI を表示/非表示にします。
- `ui/` — パレットの HTML/CSS/JS。検索・ピン操作・設定画面を実装。
- `icons/` — 拡張機能アイコン（16/32/48/128px）。

## 開発メモ
- ビルド工程は不要で、ソース編集後に拡張機能の再読み込みのみで反映されます。
- 配布用パッケージを作る場合は `zip -r switch-tab-history.zip switch-tab-history` などでアーカイブ化します。
- テストは手動で行います。`Alt+K` → 履歴検索 → ピン切替 → `/t` によるタブ検索 → 設定変更 → ブラウザ再起動後も履歴が保持されているかを確認してください。

## ライセンス
MIT License
